<!DOCTYPE html>
<html lang="en">

<head>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ML Prediction</title>
  <style>
    body {
      justify-content: center;
      align-items: center;
      display: flex;
      flex-direction: row;
      background-color: #000000;
      color: #fefffe;
      height: 95vh;
    }

    canvas {
      /* border: 1px solid #000; */
      padding: 2rem;

    }

    .container {
      /* background-color: red; */
      display: flex;
      max-height: 90vh;
      justify-content: space-evenly;
      background-color: #333333;
      max-width: 95%;
      border-radius: 5px;

    }

    #prediction-form {
      /* background-color: aqua; */
      min-width: 400px;
      margin: 1rem;

    }

    #myChart {
      /* background-color: blueviolet; */
    }

    h1 {
      text-align: center;
    }



    label {
      display: block;
      margin-bottom: 5px;
    }

    input[type="range"] {
      width: 100%;
    }

    button {
      display: block;
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      background-color: #7a3d8b;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 5px;

    }

    button:hover {
      background-color: #8827a2;
    }
  </style>
</head>

<body>
  <div class="container">
    <form id="prediction-form">


      <label for="population">Population:</label>
      <input type="range" name="population" id="population" min="1378946751" max="1601689794" value="1601689794" /><br />

      <!-- <label for="unemployment_above_15">Unemployment Above age 15:</label>
        <input
          type="range"
          name="unemployment_above_15"
          id="unemployment_above_15"
          min="8.5"
          max="10.5"
          value="8.5"
        /><br /> -->

      <label for="unemployment_between_15_24">Unemployment between age 15-24:</label>
      <input type="range" name="unemployment_between_15_24" id="unemployment_between_15_24" min="18.3771323529412" max="18.8077389390507"
        value="18.8077389390507" step="0.0001"/><br />

      <label for="unemployment_above_25">Unemployment Above age 25+:</label>
      <input type="range" name="unemployment_above_25" id="unemployment_above_25" min="7.814632353" max="8.11818838389546" value="8.11818838389546" step="0.0001"/><br />

      <!-- <label for="share_of_agricultural_land">Share of agricultural land in South Africa 2000-2020 in
        percentage:</label> -->
      <input type="range" name="share_of_agricultural_land" style="display: none!important;" id="share_of_agricultural_land" min="78.92050154" max="79.42"
        value="78.92050154" step="0.0001" />
        <!-- <br /> -->

      <label for="people_employed_in_agriculture">People employed in agricultural sector in millions:</label>
      <input type="range" name="people_employed_in_agriculture" id="people_employed_in_agriculture" min="230" max="248"
        step="1" value="230" /><br />

      <!-- <label for="total_employment_in_africa">Total employment in Africa 2010-2021(In Millions):</label> -->
      <input type="range" style="display: none!important;" name="total_employment_in_africa" id="total_employment_in_africa" min="470" max="541.781704552942"
        value="470" />
        <!-- <br /> -->

      <label for="import_us_thousand">Imports Africa:</label>
      <input type="range" name="import_us_thousand" id="import_us_thousand" min="58033618.41" max="66199586.45"
        value="58033618.41" /><br />

      <label for="export_us_thousand">Exports Africa:</label>
      <input type="range" name="export_us_thousand" id="export_us_thousand" min="71067999.24" max="76370336.17"
        value="71067999.24" /><br />
      <label for="net_official_development_assistance_and_aid">Net official Development Assistance And Aid:</label>

      <input type="range" name="net_official_development_assistance_and_aid"
        id="net_official_development_assistance_and_aid" min="63" max="69.6493821827028" value="63" /><br />

      <label
        for="credit_received_from_other_countries_in_billions">Credit Received From Other Countries in Billions:</label>

      <input type="range" name="credit_received_from_other_countries_in_billions"
        id="credit_received_from_other_countries_in_billions" min="76987.40485" max="104182.7117" value="76987.40485" /><br />
      <label for="gasoline">Price of Gasoline:</label>
      <input type="range" name="gasoline" id="gasoline" min="1.37" max="1.599835498" value="1.599835498" step="0.001" /><br />

      <input id="storing_data" value="26" style="display: none !important;" />
      <button type="submit" id="updateButton">Submit</button>
      <div id="prediction-result"></div>
    </form>
    <canvas id="myChart" width="400" height="300"></canvas>

  </div>



  <script>
    // Sample data for the line chart
    const adata = [
      315000000
      // 25.16111111,
      //   25.18619048,
      //   25.21126984,
      //   25.23634921,
      //   25.26142857,
      //   25.32142857,
      //   25.40142857,

    ];
    const labels = [
      0,
      //   2017,
      //   2018,
      //   2019,
      //   2020,
      //   2021,
      //   2022,
    ];
    const data = {
      labels: labels,
      datasets: [
        {
          label: "Predicted Value",
          data: adata,
          fill: true,
          borderColor: "rgb(182,88,91)",
          tension: 0.1,
        },
      ],
    };
    const config = {
        type: "line",
        data: data,
        options: {
          scales: {
            y: {
              ticks: {
                color: 'white' // Change y-axis text color to white
              },
              grid: {
                color: 'rgba(200, 200, 200, 0.5)' // Change y-axis grid color to light grey
              }
            },
            x: {
              ticks: {
                color: 'white' // Change x-axis text color to white
              },
              grid: {
                color: 'rgba(200, 200, 200, 0.5)' // Change x-axis grid color to light grey
              }
            }
          },
          plugins: {
            legend: {
              labels: {
                color: 'white' // Change legend text color to white
              }
            }
          }
        }
      };
    document.addEventListener("DOMContentLoaded", function () {
      var ctx = document.getElementById("myChart").getContext("2d");
      var myChart = new Chart(ctx, config);
      function updateChartData() {
        console.log(document.getElementById("storing_data").value);
        adata.push(document.getElementById("storing_data").value);
        labels.push(labels[labels.length - 1] + 1);
        // adata.shift()
        // labels.shift()
        myChart.data.datasets[0].data = adata;
        myChart.data.labels = labels;
        myChart.update();
      }
      document
        .getElementById("updateButton")
        .addEventListener("click", function () {
          // const newData = [35, 50, 45, 60, 75, 70, 80]; // New data
          setTimeout(updateChartData, 500);
        });
    });
    //
  </script>

  <script>
    document
      .getElementById("prediction-form")
      .addEventListener("submit", function (event) {
        event.preventDefault();

        // Get input values
        // const year = document.getElementById("year").value;
        const population = document.getElementById("population").value;
        // const unemployment_above_15 = document.getElementById(
        //   "unemployment_above_15"
        // ).value;
        const unemployment_between_15_24 = document.getElementById(
          "unemployment_between_15_24"
        ).value;
        const unemployment_above_25 = document.getElementById(
          "unemployment_above_25"
        ).value;
        const share_of_agricultural_land = document.getElementById(
          "share_of_agricultural_land"
        ).value;
        const people_employed_in_agriculture = document.getElementById(
          "people_employed_in_agriculture"
        ).value;
        const total_employment_in_africa = document.getElementById(
          "total_employment_in_africa"
        ).value;
        const import_us_thousand = document.getElementById(
          "import_us_thousand"
        ).value;
        const export_us_thousand = document.getElementById(
          "export_us_thousand"
        ).value;
        const net_official_development_assistance_and_aid = document.getElementById(
          "net_official_development_assistance_and_aid"
        ).value;
        const credit_received_from_other_countries_in_billions = document.getElementById(
          "credit_received_from_other_countries_in_billions"
        ).value;
        const gasoline = document.getElementById(
          "gasoline"
        ).value;

        // Send POST request to Flask app
        fetch("/", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
          },
          body: new URLSearchParams({
            population: population,
            unemployment_between_15_24: unemployment_between_15_24,
            unemployment_above_25: unemployment_above_25,
            share_of_agricultural_land: share_of_agricultural_land,
            people_employed_in_agriculture: people_employed_in_agriculture,
            total_employment_in_africa: total_employment_in_africa,
            import_us_thousand: import_us_thousand,
            export_us_thousand: export_us_thousand,
            net_official_development_assistance_and_aid: net_official_development_assistance_and_aid,
            credit_received_from_other_countries_in_billions: credit_received_from_other_countries_in_billions,
            gasoline: gasoline,

          }),
        })
          .then((response) => response.json())
          .then((data) => {
            // Display prediction result
            document.getElementById(
              "prediction-result"
            ).innerText = `Predicted Output: ${data.prediction}`;
            document.getElementById("storing_data").value = data.prediction;
          });
      });
  </script>
</body>

</html>